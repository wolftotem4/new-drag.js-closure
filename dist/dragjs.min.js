(function(){var t=function(){if("undefined"!=typeof FileList&&"undefined"!=typeof Promise)try{var e=new window.CustomEvent("test",{cancelable:!0});return e.preventDefault(),!0===e.defaultPrevented}catch(e){}return!1},r=function(e,n){return Promise.all(e.map(function(e){return e.isFile?i(e,n):s(e,n)})).then(function(e){return Array.prototype.concat.apply([],e)})},i=function(e,n){return a(e).then(function(e){return e.xRelativePath=n+e.name,[e]})},a=function(t){return new Promise(function(e,n){return t.file(e,n)})},s=function(n,t){return o(n.createReader()).then(function(e){return r(e,t+n.name+"/")})},o=function(i){return new Promise(function(t,e){i.readEntries(function(n){n.length?o(i).then(function(e){t(n.concat(e))},e):t([])},e)})},d=function(e){this.a=e},u=function(e,n){this.a=e,this.b=0,this.j=void 0!==n&&n,e.dragJsEventHandler=this,e.addEventListener("dragover",this.g.bind(this),!1),e.addEventListener("dragenter",this.c.bind(this),!1),e.addEventListener("dragleave",this.f.bind(this),!1),e.addEventListener("drop",this.h.bind(this),!1)},e=u.prototype,c=function(e){e.a.dispatchEvent(new CustomEvent("dropzone-dragleave"))},f=function(e){var n,t=e instanceof DragEvent&&e.dataTransfer||null;return(n=t)&&(n=!(n=t.types)||(n instanceof DOMStringList?n.contains("Files"):-1<n.indexOf("Files"))),n?(e.preventDefault(),t):null},l=function(e,n){n=void 0!==n&&n,e.dragJsEventHandler?n&&(e.dragJsEventHandler.j=n):new u(e,n)},v=function(t,i){l(t),t.addEventListener("dropzone-dragenter",function(){var e=t.className&&t.className.split(" ")||[];-1==e.indexOf(i)&&(e.push(i),t.className=e.join(" "))},!1),t.addEventListener("dropzone-dragleave",function(){var e,n=t.className&&t.className.split(" ")||[];-1<(e=n.indexOf(i))&&(n.splice(e,1),t.className=n.join(" "))},!1)},n=function(e,n){n=void 0===n?{}:n,this.a=e,this.b=n,t()&&(l(e,!0),v(e,this.b.cssClass&&this.b.cssClass.dragover||"is-dragover"))},h=n.prototype,p=function(e){return e.xRelativePath||e.webkitRelativePath||e.name},m=function(n,t){return this.a.addEventListener("dropzone-drop",function(e){n(e.detail.files)},!1),t&&this.a.addEventListener("dropzone-error",function(e){e.preventDefault(),t(e.detail.reason)}),this},E=function(){var e=this;return new Promise(function(n){e.a.addEventListener("dropzone-drop",function(e){n(e.detail.files)},!1)})};e.g=function(e){this.j&&(e=f(e))&&(e.dropEffect="copy")},e.c=function(e){f(e)&&0==this.b++&&this.a.dispatchEvent(new CustomEvent("dropzone-dragenter"))},e.f=function(e){f(e)&&0==--this.b&&c(this)},e.h=function(e){var n=this;this.b=0,c(this),this.j&&(e=f(e))&&function(e){if(!e.a)return Promise.resolve([]);if((e=e.a).items){e=e.items;for(var n=[],t=0;t<e.length;t++){var i=e[t].webkitGetAsEntry();i&&n.push(i)}e=r(n,"")}else e=Promise.resolve(e.files);return e}(new d(e)).then(function(e){e.length&&n.a.dispatchEvent(new CustomEvent("dropzone-drop",{detail:{files:e}}))},function(e){n.a.dispatchEvent(new CustomEvent("dropzone-drop",{cancelable:!0,detail:{reason:e}}))&&console.error(e)})};var g={listen:l},b={cssDragOver:v};h.u=m,h.listenOnDrop=m,h.m=E,h.getDropFiles=E;var w={isSupported:t,event:g,style:b,DropZone:n,utils:{toFormData:function(e,n){n=void 0===n?"files[]":n;var t=new FormData;if(e instanceof File)t.append(n,e,p(e));else for(var i=0;i<e.length;i++){var r=e[i];t.append(n,r,p(r))}return t},relativePath:p}};this.DragJs=w}).call(this);